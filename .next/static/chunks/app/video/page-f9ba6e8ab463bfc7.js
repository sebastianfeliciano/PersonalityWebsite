(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{7902:function(e,s,r){Promise.resolve().then(r.bind(r,4576))},4576:function(e,s,r){"use strict";r.r(s);var t=r(7437),n=r(2265),l=r(6463),a=r(4614),i=r(824),c=r(385),o=r(3269),d=r(8784),u=r(6548);s.default=()=>{let e=(0,l.useRouter)(),s=(0,l.useSearchParams)().get("profile")||"User 1",[r,h]=(0,n.useState)([{sender:"User 1",text:"Hi, how can I help you today?"}]),[m,x]=(0,n.useState)(""),[p,j]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),w="https://randomuser.me/api/portraits/men/1.jpg";(0,n.useEffect)(()=>{let e=setTimeout(()=>{j(!0)},9e3);return()=>clearTimeout(e)},[s]);let N=async()=>{if(""===m.trim())return;let e=[...r,{sender:"You",text:m}];h(e),x("");try{let s=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e})});if(s.ok){let r=await s.json();h([...e,{sender:"Alice",text:r.reply}])}else console.error("Error in response:",s.statusText)}catch(e){console.error("Error fetching the chat response:",e)}},k=()=>{j(!1)},C=()=>{g(!1),b(!0)};return(0,t.jsxs)("div",{className:"h-screen w-full flex flex-col",children:[(0,t.jsxs)("div",{className:"border-b p-4 flex justify-between items-center",children:[(0,t.jsx)("button",{className:"btn btn-neutral",onClick:()=>{e.back()},children:"Back"}),(0,t.jsxs)("p",{className:"text-xl",children:["Chat with ",s]})]}),(0,t.jsx)("div",{className:"flex-grow p-4 bg-gray-100 overflow-y-auto",children:r.map((e,r)=>(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-4 ".concat("You"===e.sender?"ml-auto":"mr-auto flex items-center"),children:["User 1"===e.sender&&y&&(0,t.jsx)("img",{src:w,alt:"".concat(s,"'s image"),className:"w-8 h-8 rounded-full mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("strong",{children:[e.sender,":"]})," ",e.text]})]},r))}),(0,t.jsxs)("div",{className:"p-4 bg-white flex items-center",children:[(0,t.jsx)("input",{type:"text",className:"input input-bordered flex-grow",placeholder:"Type a message",value:m,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&N()}),(0,t.jsx)("button",{className:"btn btn-primary ml-2",onClick:N,children:"Send"})]}),(0,t.jsxs)(a.Z,{open:p,onClose:k,children:[(0,t.jsx)(i.Z,{children:"View User's Image"}),(0,t.jsx)(c.Z,{children:(0,t.jsxs)(o.Z,{children:["Would you like to see ",s,"'s image?"]})}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(u.Z,{onClick:k,color:"primary",children:"No"}),(0,t.jsx)(u.Z,{onClick:()=>{j(!1),g(!0)},color:"primary",children:"Yes"})]})]}),(0,t.jsxs)(a.Z,{open:f,onClose:C,children:[(0,t.jsxs)(i.Z,{children:[s,"'s Image"]}),(0,t.jsx)(c.Z,{children:(0,t.jsx)("img",{src:w,alt:"".concat(s,"'s image"),className:"w-full h-auto"})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(u.Z,{onClick:C,color:"primary",children:"Close"})})]})]})}}},function(e){e.O(0,[948,588,362,971,23,744],function(){return e(e.s=7902)}),_N_E=e.O()}]);